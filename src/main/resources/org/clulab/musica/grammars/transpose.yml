
vars: org/clulab/musica/grammars/triggers.yml


rules:

   - name: Transpose-rule-1
     label: ${label}
     priority: ${rulepriority}
     type: token
     pattern: |
       (?<trigger>[word=/(?i)^${transpose_triggers}/]) @note:Note ([]? @onset:Onset)? @direction:Direction @step:Step

   - name: Transpose-rule-2
     label: ${label}
     priority: ${rulepriority}
     example: "Transpose all the notes up 5 half steps in measure 1."
     type: token
     pattern: |
       (?<trigger>[word=/(?i)^${transpose_triggers}/]) @note:Note @direction:Direction @step:Step ([]? @onset:Onset)?

   # todo: add specificity to avoid things like 'change the whole note to a half note'
   - name: Transpose-rule-3
     label: ${label}
     priority: ${rulepriority}
     example: "Move the G quarter note to the F above it"
     type: token
     pattern: |
       (?<trigger>[word=/(?i)^${transpose_triggers}/]) @note:Note to (@note:Note|@pitch:Pitch) @locationrel:Locationrel?

   - name: Transpose-rule-everything
     label: ${label}
     priority: ${rulepriority}
     example: "Transpose all the notes up 5 half steps in measure 1."
     type: token
     pattern: |
       (?<trigger>[word=/(?i)^${transpose_triggers}/]) @specifier:Specifier @direction:Direction @step:Step ([]? @onset:Onset)?
