vars:
      notes: "A|A#|B|C|C#|D|D#|E|F|F#|G|G#"
      durations: "eight|quarter|half|whole"

rules:

## --------------------------------------------
              # Atomic things
## --------------------------------------------
    - name: duration
      label: Duration
      priority: 1
      type: token  # surface rule
      pattern: |
        [word=/(?i)^(${durations})/]

    # todo: fix
    - name: pitch-1
      label: Pitch
      priority: 1
      type: token  # surface rule
      pattern: |
        [word=/^(A|B|C|D|E|F|G)[0-9]*/]

    - name: specifier-1
      label: Specifier
      priority: 1
      type: token  # surface rule
      pattern: |
        [tag=/^DT/]


    - name: beat-1
      label: Beat
      priority: 1
      type: token  # surface rule
      pattern: |
        (?<trigger>[word=/^beat/]) (?<cardinality> [tag=/CD/])

    - name: measure-1
      label: Measure
      priority: 1
      type: token  # surface rule
      pattern: |
        (?<trigger>[word=/^measure/]) (?<cardinality> [tag=/CD/])


## --------------------------------------------
              # Simple Events
## --------------------------------------------


    # no "type" so it's a syntax rule
    - name: note-1
      label: Note
      priority: 2
      pattern: |
        trigger = [word=/(?i)^note/]
        duration: Duration? = >/(amod|compound)/
        pitch: Pitch? = >/(amod|compound)/
        specifier: Specifier? = >det


    - name: onset-1
      label: Onset
      priority: 2
      type: token
      pattern: |
          (@measure:Measure? []? @beat:Beat |
          @measure:Measure []? @beat:Beat? |
          @beat:Beat? []? @measure:Measure |
          @beat:Beat []? @measure:Measure?)

    - name: onset-2
      label: Onset
      priority: 2
      type: token
      pattern: |
        @measure:Measure []? @beat:Beat |
        @beat:Beat []? @measure:Measure

