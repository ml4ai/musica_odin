
vars: org/clulab/musica/grammars/triggers.yml


rules:

  - name: delete-1
    label: ${label}
    priority: ${rulepriority}
    example: "Delete everything in the second bar"
    type: token
    pattern: |
      (?<trigger>[word=/(?i)^(${delete_triggers})/])
      (@everything:Everything|@note:Note|@rest:Rest|@chord:Chord|@pitch:Pitch|@measure:Measure)
      (@locationrel:LocationRel (@note:Note|@rest:Rest|@chord:Chord|@pitchsequence:PitchSequence)?|@locationabs:LocationAbs)? ([]? @onset:Onset)?

#  - name: Delete-rule-passive-syntax
#    label: ${label}
#    priority: ${rulepriority}
#    example: "The first quarter note in measure 1 is deleted"
#    pattern: |
#      trigger = [word=/(?i)^${delete_triggers}/]
#      everything: Everything? = >nsubjpass
#      note: Note? = >nsubjpass
#      chord: Chord? = >nsubjpass
#      measure: Measure? = >nsubjpass
#      rest: Rest? = >nsubjpass
#      onset: Onset = >nsubjpass >/nmod_*/

  - name: delete-2-passive
    label: ${label}
    priority: ${rulepriority}
    example: "The first quarter note should be deleted"
    type: token
    pattern: |
      (@everything:Everything|@note:Note|@rest:Rest|@chord:Chord|@pitch:Pitch|@measure:Measure)
      ((@locationrel:LocationRel (@note:Note|@rest:Rest|@chord:Chord|@pitchsequence:PitchSequence)?)|@locationabs:LocationAbs)?
      ([]? @onset:Onset)? should? (${aux_be})
      (?<trigger>[word=/(?i)^(${delete_triggers})/])


  - name: delete-3-parts-of-chord
    label: ${label}
    priority: ${rulepriority}
    example: "Delete the upper note from the chord"
    type: token
    pattern: |
      (?<trigger>[word=/(?i)^(${delete_triggers})/]) @note:Note (in|from) @chord:Chord
      |
      @note:Note (in|from) @chord:Chord (should)? [word=/^(${aux_be})/] (?<trigger>[word=/(?i)^(${delete_triggers})/])

  - name: delete-4-note-from-set
    label: ${label}
    priority: ${rulepriority}
    example: "Delete the first of those two eighth notes"
    type: token
    pattern: |
      (?<trigger>[word=/(?i)^(${delete_triggers})/]) @specifier:Specifier of (@note:Note|@chord:Chord|@rest:Rest)

  - name: delete-5-note-from-set-passive
    label: ${label}
    priority: ${rulepriority}
    example: "The first of those two eighth notes should be deleted"
    type: token
    pattern: |
      @specifier:Specifier of (@note:Note|@chord:Chord|@rest:Rest) should? [word=/^(${aux_be})/]
      (?<trigger>[word=/(?i)^(${delete_triggers})/])