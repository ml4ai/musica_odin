
vars: org/clulab/musica/grammars/triggers.yml


rules:

    - name: insert-1
      label: ${label}
      priority: ${rulepriority}
      example: "Insert an A quarter note after the D in measure 3"
      type: token
      pattern: |
        (?<trigger>[word=/(?i)^(${insert_triggers})/])
        (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure)
        @location:Location?

    - name: insert-2-passive
      label: ${label}
      priority: ${rulepriority}
      example: "An A quarter note is inserted after the D in measure 3"
      type: token
      pattern: |
        (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure)
        (and (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure))?
        [word=/^(${modals})/]? to? [word=/(?i)^(${aux_be})/] (?<trigger>[word=/(?i)^(${insert_triggers})/])
        @location:Location?

    - name: insert-3
      label: ${label}
      priority: ${rulepriority}
      example: "Insert a quarter note and a quarter rest after the last eighth note"
      type: token
      pattern: |
        (?<trigger>[word=/(?i)^(${insert_triggers})/])
        (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure)
        (and (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure))?
        @location:Location?

    - name: insert-4
      label: ${label}
      priority: ${rulepriority}
      example: "At the start of the second measure, add a quarter note"
      type: token
      pattern: |
        (@location:Location [tag=/,/]?)? (?<trigger>[word=/(?i)^(${insert_triggers})/])
        (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure)

    - name: insert-5-passive
      label: ${label}
      priority: ${rulepriority}
      example: "At the start of the second measure, a quarter note should be added"
      type: token
      pattern: |
        (@location:Location [tag=/,/]?)?
        (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure)
        (and (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure))?
        [word=/^(${modals})/]? to? [word=/^(${aux_be})/] (?<trigger>[word=/(?i)^(${insert_triggers})/])

    - name: insert-6-passive-between
      label: ${label}
      priority: ${rulepriority}
      example:
      type: token
      pattern: |
        (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure)
        (and (@note:Note|@chord:Chord|@rest:Rest|@pitchsequence:PitchSequence|@measure:Measure))?
        [word=/^(${modals})/]? to? [word=/(${aux_be})/] (?<trigger>[word=/(?i)^(${insert_triggers})/])
        @location:Location? (and @location:Location)?

#    - name: insert-1
#      label: Insert
#      priority: 3
#      pattern: |  # what is amod or compound?
#        trigger = [word=/(?i)^note/]
#        duration: Duration? = >/(amod|compound)/
#        pitch: Pitch? = >/(amod|compound)/
#        specifier: Specifier? = >det